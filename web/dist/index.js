!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var a=n(2);a.render(React.createElement(UI.URLRouter,{home:"/",routers:n(3)}),document.getElementById("container"))},function(e,t){e.exports=ReactDOM},function(e,t,n){e.exports=zn.deepEachObject({"/znadmin/Menu":"./view/Menu.js","/znadmin/MyInfo":"./view/MyInfo.js","/znadmin/Project":"./view/Project.js","/znadmin/User":"./view/User.js","/znadmin/UserInfo":"./view/UserInfo.js","/znadmin/UserLog":"./view/UserLog.js","/znadmin/UsersForRoles":"./view/UsersForRoles.js","/znadmin/Role":"./view/Role.js","/znadmin/Var":"./view/Var.js"},function(e,t,a){return n(4)(e)})},function(e,t,n){function a(e){return n(i(e))}function i(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./component/RightsSetting":5,"./component/RightsSetting.js":5,"./component/RoleSearcher":8,"./component/RoleSearcher.js":8,"./component/UserSearcher":7,"./component/UserSearcher.js":7,"./component/UserSearcher.less":9,"./component/index":12,"./component/index.js":12,"./entry":1,"./entry.js":1,"./index":14,"./index.js":14,"./less/UserItem.less":15,"./model/BaseBusinessView":17,"./model/BaseBusinessView.js":17,"./model/BaseModelView":18,"./model/BaseModelView.js":18,"./model/MasterSlave":19,"./model/MasterSlave.js":19,"./model/Slave":20,"./model/Slave.js":20,"./model/TreeModelView":21,"./model/TreeModelView.js":21,"./model/index":22,"./model/index.js":22,"./routers":3,"./routers.js":3,"./tools":24,"./tools.js":24,"./view/Menu":25,"./view/Menu.js":25,"./view/MyInfo":27,"./view/MyInfo.js":27,"./view/Project":28,"./view/Project.js":28,"./view/ProjectBug":29,"./view/ProjectBug.js":29,"./view/Role":30,"./view/Role.js":30,"./view/User":32,"./view/User.js":32,"./view/UserInfo":33,"./view/UserInfo.js":33,"./view/UserInfo.less":34,"./view/UserLog":36,"./view/UserLog.js":36,"./view/UsersForRoles":31,"./view/UsersForRoles.js":31,"./view/Var":26,"./view/Var.js":26,"./view/index":37,"./view/index.js":37};a.keys=function(){return Object.keys(s)},a.resolve=i,e.exports=a,a.id=4},function(e,t,n){var a=n(6),i=n(7),s=n(8);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{model:null,id:null}},getInitialState:function(){return{users:",",roles:",",observers:",",ownerId:0,items:[{title:"是否启用权限",name:"ifEnabledRights",type:"radio",data:[{text:"禁用",value:0},{text:"启用",value:1}]},{title:"扩展",name:"ext",type:"textarea"}]}},componentDidMount:function(){this.__load(this.props.id)},componentWillReceiveProps:function(e){e.id!=this.props.id&&this.__load(e.id)},__load:function(e){e&&Store.post("/znadmin/model/selectOne",{fields:"*",model:this.props.model,where:{id:e}}).exec().then(function(e){this.setState(e.result)}.bind(this))},__save:function(){if(!this.props.id)return void Toast.warning("必须编辑项");var e={users:this.state.users,roles:this.state.roles};Store.post("/znadmin/model/updateNode",{data:e,model:this.props.model,where:{id:this.props.id}}).exec().then(function(e){e.result.changedRows&&Toast.success("保存成功")}.bind(this))},__changeOwner:function(){},render:function(){var e=this;return a.createElement("div",{className:"rt-rights-setting",style:{padding:5}},a.createElement("div",{className:"title",style:{lineHeight:"4rem"}},a.createElement("i",{className:"fa fa-yelp",style:{margin:5}}),a.createElement("span",null,"权限设置【拥有者：",a.createElement("a",{onClick:this.__changeOwner},this.state.ownerId),"】"),this.props.id&&a.createElement(UI.Button,{onClick:this.__save,text:"保存",icon:"fa-save",float:"right",style:{margin:5}})),a.createElement(UI.Card,{icon:"fa-user",title:"用户"},a.createElement(i,{value:this.state.users,onChange:function(t){return e.state.users=t}})),a.createElement(UI.Card,{icon:"fa-graduation-cap",title:"角色"},a.createElement(s,{value:this.state.roles,onChange:function(t){return e.state.roles=t}})))}})},function(e,t){e.exports=React},function(e,t,n){var a=n(6),i=a.createClass({displayName:"UserSelector",getDefaultProps:function(){return{value:","}},getInitialState:function(){return{value:this.props.value,tag:null,tags:[],user:null,users:[]}},componentDidMount:function(){this.loadRoles(),this.loadUsers()},componentWillReceiveProps:function(e){e.value!=this.props.value&&this.setState({value:e.value})},loadRoles:function(){},loadUsers:function(){Store.post("/znadmin/model/select",{model:"zn_admin_user",fields:"id as value, name as text"}).exec().then(function(e){this.setState({users:e.result})}.bind(this))},__onTagClick:function(e){this.setState({tag:e.value})},__onUserClick:function(e){var t=e.value+",";this.state.value.indexOf(","+t)==-1?this.state.value=this.state.value+t:this.state.value=this.state.value.replace(","+t,","),this.setState({value:this.state.value}),this.props.onChange&&this.props.onChange(this.state.value)},render:function(){return a.createElement("div",{className:"rt-user-selector"},a.createElement("ul",{className:"tags",style:{borderBottom:"1px dashed #e4e2e2"}},this.state.tags.map(function(e,t){var n=this;return a.createElement("li",{key:t,className:this.state.tag==e.value?"curr":"",onClick:function(){return n.__onTagClick(e)}},e.text)}.bind(this))),a.createElement("ul",{className:"tags"},this.state.users.map(function(e,t){var n=this;return a.createElement("li",{key:t,className:this.state.value.indexOf(","+e.value+",")!==-1?"curr":"",onClick:function(){return n.__onUserClick(e)}},e.text)}.bind(this))))}});e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{model:"zn_admin_user"}},getInitialState:function(){return{data:Store.post("/znadmin/model/select",{model:this.props.model,where:{pid:0}}),userSelectType:0}},componentDidMount:function(){},__onListViewItemClick:function(e,t){t.view&&this.setState({userSelectType:t.type})},render:function(){return a.createElement(i,this.props)}})},function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{value:","}},getInitialState:function(){return{value:this.props.value,roles:[]}},componentDidMount:function(){this.loadRoles()},componentWillReceiveProps:function(e){e.value!=this.props.value&&this.setState({value:e.value})},loadRoles:function(){Store.post("/znadmin/model/selectAllChildByPid",{model:"zn_admin_role",fields:"id as value, title as text, type",pid:1}).exec().then(function(e){this.setState({roles:e.result})}.bind(this))},__onTagClick:function(e){this.setState({tag:e.value})},__onUserClick:function(e){var t=e.value+",";this.state.value.indexOf(","+t)==-1?this.state.value=this.state.value+t:this.state.value=this.state.value.replace(","+t,","),this.setState({value:this.state.value}),this.props.onChange&&this.props.onChange(this.state.value)},__renderIcon:function(e){switch(e.type){case 0:return null;case 1:return a.createElement("i",{title:"这是部门",className:"fa fa-sitemap",style:{margin:5,color:"#d9534f"}});case 2:return a.createElement("i",{title:"这是角色",className:"fa fa-graduation-cap",style:{margin:5}})}},render:function(){return a.createElement("div",{className:"rt-user-selector"},a.createElement("ul",{className:"tags"},this.state.roles.map(function(e,t){var n=this;return a.createElement("li",{key:t,className:this.state.value.indexOf(","+e.value+",")!==-1?"curr":"",onClick:function(){return n.__onUserClick(e)}},this.__renderIcon(e),e.text)}.bind(this))))}})},function(e,t){},,,function(e,t,n){e.exports=zn.arrayValueToObject(["RightsSetting","RoleSearcher","UserSearcher"],function(e,t){return n(13)("./"+e+".js")})},function(e,t,n){function a(e){return n(i(e))}function i(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./RightsSetting.js":5,"./RoleSearcher.js":8,"./UserSearcher.js":7,"./index.js":12};a.keys=function(){return Object.keys(s)},a.resolve=i,e.exports=a,a.id=13},function(e,t,n){e.exports=zn.react.loadPaths({component:"./component/index.js",view:"./view/index.js",model:"./model/index.js",routers:"./routers.js",tools:"./tools.js"},function(e){return n(4)(e)})},function(e,t){},,function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{model:"",headers:[],insertInputs:[],updateInputs:[]}},getInitialState:function(){return{data:Store.post("/znadmin/model/paging",{model:this.props.model}),currItem:null,toolbarItems:[{text:"新建项目",name:"addItem",icon:"fa-plus"},{text:"编辑项目",name:"updateItem",icon:"fa-edit"},{text:"删除项目",name:"deleteItem",icon:"fa-remove"}]}},componentDidMount:function(){},__onTableRowClick:function(e,t,n,a){this._currItem=t},__doSuccess:function(){Popup.close("dialog"),Popup.message({content:"操作成功！",type:"success"}),this.state.data.refresh()},__addItem:function(e){Popup.dialog({title:"添加项",hStyle:{backgroundColor:"#0B72A5"},width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/addNode",exts:{model:this.props.model},merge:"data",style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"新建项目",icon:"fa-plus",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.props.insertInputs})})},__updateItem:function(e){Popup.dialog({title:"更新项目信息",hStyle:{backgroundColor:"#0B72A5"},width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/updateNode",exts:{model:this.props.model},merge:"data",data:e,style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"更新",icon:"fa-edit",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.props.updateInputs})})},__onToolbarClick:function(e){if("addItem"==e.name)return void this.__addItem();if(!this.state.currItem)return Popup.message({content:"必须选择主项",type:"warning"}),!1;switch(e.name){case"updateItem":this.__updateItem(this.state.currItem);break;case"deleteItem":Popup.confirm({content:"确认删除该项吗？",onConfirm:function(){Store.post("/znadmin/model/deleteNodes",{model:this.props.model,id:this.state.currItem.id}).exec().then(function(e){this.state.data.refresh(),Popup.message({content:"删除成功！",type:"warn"})}.bind(this),function(e){Popup.message({content:"删除出错: "+e.result,type:"danger"})})}.bind(this)})}},render:function(){return a.createElement(UI.ActivityLayout,{direction:"v",begin:3.5,barWidth:.3,unit:"rem"},a.createElement("div",null,a.createElement(UI.ButtonGroup,{float:"right",items:this.state.toolbarItems,onClick:this.__onToolbarClick})),a.createElement(UI.PagerView,{view:"Table",enableFilter:!1,checkbox:50,showHeader:!0,data:this.state.data,onTableRowClick:this.__onTableRowClick,items:this.props.headers}))}})},function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{model:""}},getInitialState:function(){return{data:Store.post("/znadmin/model/paging",{model:this.props.model,fields:"*"}),items:[],currItem:null,toolbarItems:[{text:"添加项",name:"addItem",icon:"fa-plus",style:{marginRight:0}},{text:"编辑项",name:"updateItem",icon:"fa-edit"},{text:"删除项",name:"deleteItem",icon:"fa-remove"}]}},componentDidMount:function(){this.__loadTableHeaders()},componentWillReceiveProps:function(e){e.model!=this.props.model&&(this.props.model=e.model,this.__loadTableHeaders(function(){this.state.data.ext({model:e.model}).refresh()}.bind(this)))},__loadTableHeaders:function(e){Store.get("/znadmin/model/getModelProps?model="+this.props.model).exec().then(function(t){this.setState({items:t.result}),e&&e(t)}.bind(this))},__onTableRowClick:function(e,t,n,a){this._currItem=t},__addItemSuccess:function(e){Popup.close("dialog"),Popup.message({content:"添加成功！",type:"success"})},__addItem:function(e){var t=this;Popup.dialog({title:"添加项",hStyle:{backgroundColor:"#0B72A5"},width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/addNode",exts:{model:this.props.model},merge:"data",style:{margin:25},syncSubmit:!1,onSubmitBefore:function(e,t){},onSubmitSuccess:function(){return t.state.data.refresh()},btns:[{text:"添加",icon:"fa-plus",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:[{name:"title",title:"title",type:"text",required:!0}]})})},__updateItem:function(e){var t=this;Popup.dialog({title:"修改项",hStyle:{backgroundColor:"#0B72A5"},width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/updateNode",exts:{model:this.props.model},merge:"data",data:e,style:{margin:25},syncSubmit:!1,onSubmitBefore:function(e,t){},onSubmitSuccess:function(){return t.state.data.refresh()},btns:[{text:"添加",icon:"fa-plus",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:[{name:"title",title:"title",type:"text",required:!0}]})})},__onToolbarClick:function(e){if("addItem"==e.name)return void this.__addItem();if(!this.state.currItem)return Popup.message({content:"必须选择主项",type:"warning"}),!1;switch(e.name){case"updateItem":this.__updateItem(this.state.currItem);break;case"deleteItem":Popup.confirm({content:"确认删除该项吗？",onConfirm:function(){Store.post("/znadmin/model/deleteNodes",{model:this.props.model,id:this.state.currItem.id}).exec().then(function(e){this.state.data.refresh(),Popup.message({content:"删除成功！",type:"warn"})}.bind(this),function(e){Popup.message({content:"删除出错: "+e.result,type:"danger"})})}.bind(this)})}},render:function(){return a.createElement(UI.ActivityLayout,{direction:"v",begin:3.5,barWidth:.3,unit:"rem"},a.createElement("div",null,a.createElement(UI.ButtonGroup,{float:"right",items:this.state.toolbarItems,onClick:this.__onToolbarClick})),a.createElement(UI.PagerView,{view:"Table",enableFilter:!1,checkbox:50,showHeader:!0,data:this.state.data,items:this.state.items}))}})},function(e,t,n){var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(6),s=n(20);e.exports=i.createClass({displayName:"exports",getDefaultProps:function(){return{title:"",model:"",where:{},formItems:[],toolbarItems:[],slave:{title:"",model:"",where:{},formItems:[],toolbarItems:[]}}},getInitialState:function(){return{masterId:null,data:Store.post("/znadmin/model/paging",{model:this.props.model,where:this.props.where})}},componentDidMount:function(){},__doSuccess:function(){Popup.close("dialog"),Popup.message({content:"操作成功！",type:"success"}),this.state.data.refresh()},__addItem:function(e){Popup.dialog({title:"添加",hStyle:{backgroundColor:"#0B72A5"},width:480,content:i.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/addNode",exts:{model:this.props.model},hiddens:this.props.where,merge:"data",style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"添加",icon:"fa-plus",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.props.formItems})})},__removeItems:function(){Popup.confirm({content:"确认删除该项吗？",onConfirm:function(){Store.post("/znadmin/model/deleteNode",{model:this.props.model,id:data.id}).exec().then(function(e){this.state.data.refresh(),Popup.message({content:"删除成功！",type:"warn"})}.bind(this),function(e){Popup.message({content:"删除出错: "+e.result,type:"danger"})})}.bind(this)})},__removeItem:function(){this.state.masterId?Popup.confirm({content:"确认删除该项吗？",onConfirm:function(){Store.post("/znadmin/model/deleteNode",{model:this.props.model,id:this.state.masterId}).exec().then(function(e){this.state.data.refresh(),Toast.success("删除成功！")}.bind(this),function(e){Toast.error("删除出错: "+e.result)})}.bind(this)}):Toast.warning("请先选择待删除数据项！")},__updateItem:function(e){Popup.dialog({title:"更新项目信息",hStyle:{backgroundColor:"#0B72A5"},width:480,content:i.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/updateNode",exts:{model:this.props.model},merge:"data",data:e,style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"更新",icon:"fa-edit",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.props.formItems})})},__onToolbarClick:function(e){switch(e.name){case"addItem":this.__addItem();break;case"removeItem":this.__removeItem();break;case"removeItems":this.__removeItems()}},__onPagerListViewClick:function(e,t,n,a){this.setState({masterId:e})},render:function(){return i.createElement(UI.Page,{toolbarItems:this.props.toolbarItems,onToolbarClick:this.__onToolbarClick,title:this.props.title},i.createElement(UI.ActivityLayout,{direction:"h",begin:this.props.leftWidth||250,unit:"px"},i.createElement(UI.PagerView,{view:"ListView",className:"rt-list-view-border",textKey:"name",valueKey:"id",selectMode:"radio",fireIndex:0,onItemClick:this.__onPagerListViewClick,itemRender:this.props.itemRender,itemClassName:this.props.itemClassName,data:this.state.data}),this.state.masterId?i.createElement(s,a({},this.props.slave,{masterId:this.state.masterId})):i.createElement("div",null,"请选择主表数据记录")))}})},function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{masterId:0,title:"",model:"",where:{},formItems:[],toolbarItems:[]}},getInitialState:function(){var e=this.props.where;return this.props.masterId&&(e.masterId=this.props.masterId),{where:e,data:Store.post("/znadmin/model/paging",{model:this.props.model,where:e})}},componentWillReceiveProps:function(e){e.masterId!==this.props.masterId&&(this.state.data._data.where={masterId:e.masterId},this.state.data.exec())},__doSuccess:function(){Popup.close(),Popup.message({content:"操作成功！",type:"success"}),this.state.data.refresh()},__addItem:function(e){Popup.dialog({title:"添加",width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/addNode",exts:{model:this.props.model},hiddens:this.state.where,merge:"data",style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"添加",icon:"fa-plus",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",float:"right",status:"danger"}],items:this.props.formItems})})},__updateItem:function(e){Popup.dialog({title:"修改信息",width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/updateNode",exts:{model:this.props.model},merge:"data",value:e,style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"修改",icon:"fa-edit",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.props.formItems})})},__onToolbarClick:function(e){switch(e.name){case"addItem":return this.__addItem();case"updateItem":return this.__updateItem(this.state.currItem);case"deleteItems":Popup.confirm({content:"确认删除该项吗？",onConfirm:function(){Store.post("/znadmin/model/deleteNodes",{model:this.props.model,ids:this._value}).exec().then(function(e){this.state.data.refresh(),Popup.message({content:"删除成功！",type:"warn"})}.bind(this),function(e){Popup.message({content:"删除出错: "+e.result,type:"danger"})})}.bind(this)})}},render:function(){var e=this;return a.createElement(UI.Page,{title:this.props.title,toolbarItems:this.props.toolbarItems,onToolbarClick:this.__onToolbarClick},a.createElement(UI.PagerView,{view:"ListView",className:"rt-list-view-border",ref:"listview",textKey:"name",valueKey:"id",selectMode:"checkbox",itemRender:this.props.itemRender,onClick:function(t,n){return e._value=t},data:this.state.data}))}})},function(e,t,n){var a=n(6),i=n(5);e.exports=zn.react.TreeModelView=a.createClass({displayName:"TreeModelView",getDefaultProps:function(){return{model:"zn_admin_var",pid:0}},getInitialState:function(){var e=this.props.where;return e?e.pid=this.props.pid:e={pid:this.props.pid},this._where=e,{data:Store.post("/znadmin/model/select",{model:this.props.model,where:e,order:{treeOrder:"asc"}}),items:this.props.fields||[],currItem:null,toolbarItems:[{title:"添加主项",name:"addMainItem",icon:"fa-plus-square"},{title:"添加子项",name:"addChildItem",icon:"fa-plus"},{title:"删除当前项",name:"deleteCurrItem",icon:"fa-remove"},{title:"编辑当前项",name:"editCurrItem",icon:"fa-edit"},{title:"上移当前项",name:"upCurrItem",icon:"fa-angle-up"},{title:"下移当前项",name:"downCurrItem",icon:"fa-angle-down"}]}},componentDidMount:function(){this.__loadTableHeaders()},componentWillReceiveProps:function(e){e.model!=this.props.model&&(this.props.model=e.model,this.__loadTableHeaders(function(){this.state.data.extend({model:e.model}).refresh()}.bind(this)))},__loadTableHeaders:function(e){this.state.items.length||Store.get("/znadmin/model/getModelProps?model="+this.props.model).exec().then(function(t){this.setState({items:t.result}),e&&e(t)}.bind(this))},__onClick:function(e,t){this.state.currItem=e,this.setState({currItem:e}),this.props.onItemClick&&this.props.onItemClick(e,t)},__addItemSuccess:function(e){Popup.close("dialog"),Popup.message({content:"添加成功！",type:"success"});var t=this.refs.maintreemenu;e&&this.state.currItem&&(t=this.state.currItem.props.parent),t.refresh()},__editItemSuccess:function(){Popup.close("dialog"),this.state.currItem.props.parent.refresh()},__editItem:function(){var e=this;return this.state.currItem?void Popup.dialog({title:"编辑",hStyle:{backgroundColor:"#0B72A5"},width:780,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",style:{margin:25},action:"/znadmin/model/updateNode",exts:{model:this.props.model,where:{id:this.state.currItem.props.data.id}},merge:"data",value:Store.post("/znadmin/model/selectOne",{model:this.props.model,where:{id:this.state.currItem.props.data.id}}),syncSubmit:!1,onSubmitBefore:function(t,n){e._data=t},onSubmitSuccess:this.__editItemSuccess,btns:[{text:"修改",icon:"fa-edit",type:"submit",float:"right",style:{marginRight:0}}],items:this.state.items})}):void Popup.message({content:"必须编辑项",type:"warning"})},__addItem:function(e){var t=this,n={};for(var i in this._where)n[i]=this._where[i];n.pid=e,Popup.dialog({title:"添加项",hStyle:{backgroundColor:"#0B72A5"},width:780,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/addNode",hiddens:n,exts:{model:this.props.model},merge:"data",style:{margin:25},syncSubmit:!1,onSubmitBefore:function(e,n){t._data=e},onSubmitSuccess:function(){return t.__addItemSuccess(e)},btns:[{text:"添加",icon:"fa-plus",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.state.items})})},__onToolbarClick:function(e){if("addMainItem"==e.name)return void this.__addItem();if(!this.state.currItem)return Popup.message({content:"必须选择主项",type:"warning"}),!1;var t=this.state.currItem.props.data.id;switch(e.name){case"addChildItem":this.__addItem(t);break;case"editCurrItem":this.__editItem();break;case"upCurrItem":this.__upItem();break;case"downCurrItem":this.__downItem();break;case"deleteCurrItem":Popup.confirm({content:"确认删除该项吗？",onConfirm:function(){Store.post("/znadmin/model/deleteNode",{model:this.props.model,id:t}).exec().then(function(e){this.state.currItem.props.parent.refresh(),Popup.message({content:"删除成功！",type:"warn"})}.bind(this),function(e){Popup.message({content:"删除出错: "+e.result,type:"danger"})})}.bind(this)})}},__renderRight:function(){var e=this.props.rightRender&&this.props.rightRender(this);return e?e:a.createElement(i,{model:this.props.model,id:this.state.currItem?this.state.currItem.props.data.id:null})},__itemContentRender:function(e){var t=this.props.itemContentRender&&this.props.itemContentRender(e);return t?t:a.createElement("span",null,a.createElement("i",{style:{margin:5},className:"fa "+e.data.icon}),e.data.id+"、"+e.data.title)},render:function(){return a.createElement(UI.Page,{toolbarItems:this.state.toolbarItems,onToolbarClick:this.__onToolbarClick,title:this.props.title},a.createElement(UI.ActivityLayout,{direction:"h",begin:this.props.leftWidth||35,barWidth:.3,unit:"rem"},a.createElement(UI.TreeListView,{itemContentRender:this.__itemContentRender,ref:"maintreemenu",activeAll:this.props.activeAll,onClick:this.__onClick,data:this.state.data}),this.__renderRight()))}})},function(e,t,n){e.exports=zn.arrayValueToObject(["BaseModelView","TreeModelView","BaseBusinessView","MasterSlave","Slave"],function(e,t){return n(23)("./"+e+".js")})},function(e,t,n){function a(e){return n(i(e))}function i(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./BaseBusinessView.js":17,"./BaseModelView.js":18,"./MasterSlave.js":19,"./Slave.js":20,"./TreeModelView.js":21,"./index.js":22};a.keys=function(){return Object.keys(s)},a.resolve=i,e.exports=a,a.id=23},function(e,t,n){e.exports=zn.deepEachObject({"/tool/Menu":"./view/Menu.js","/tool/Project":"./view/Project.js","/tool/User":"./view/User.js","/tool/Role":"./view/Role.js","/tool/Var":"./view/Var.js"},function(e,t,a){return n(4)(e)})},function(e,t,n){var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(6),s=(n(26),n(21)),o=n(5),r=i.createClass({displayName:"VarPanel",getInitialState:function(){return{typeIndex:0}},__onListViewItemClick:function(e,t,n){this.setState({typeIndex:n})},__renderBody:function(){var e=this.props.treeModel;return i.createElement(o,{model:e.props.model,id:e.state.currItem?e.state.currItem.props.data.id:null})},render:function(){return this.__renderBody()}});e.exports=i.createClass({displayName:"exports",getDefaultProps:function(){return{model:"zn_admin_menu",title:"菜单管理",leftWidth:30,pid:0,fields:[{title:"标题",type:"Input",name:"title"},{title:"类型",type:"Radio",name:"type",value:0,data:[{text:"分类",value:0},{text:"功能菜单",value:1}]},{title:"图标",type:"Input",name:"icon"},{title:"链接",type:"Input",name:"url"},{title:"路径",type:"Input",name:"path"},{title:"扩展",type:"Textarea",name:"ext"}]}},__rightRender:function(e){return i.createElement(r,{treeModel:e})},render:function(){return i.createElement(s,a({},this.props,{rightRender:this.__rightRender}))}})},function(e,t,n){var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(6),s=n(21),o=n(5);e.exports=i.createClass({displayName:"exports",getDefaultProps:function(){return{model:"zn_admin_var",pid:0,title:"资源管理",menuId:0,fields:[{title:"标题",type:"Input",name:"title"},{title:"类型",type:"Radio",name:"type",value:0,data:[{text:"分类",value:0},{text:"按钮",value:1},{text:"常量",value:2},{text:"标签",value:3},{text:"标签",value:4}]},{title:"图标",type:"Input",name:"icon"},{title:"图片",type:"ImageUploader",name:"img",action:"/znadmin/uploadFiles"},{title:"链接",type:"Input",name:"url"},{title:"路径",type:"Input",name:"path"},{title:"扩展",type:"Textarea",name:"ext"}]}},__rightRender:function(e){if(!e.state.currItem)return null;e.state.currItem.props.data.id;return i.createElement("div",null,i.createElement(o,{model:this.props.model,id:e.state.currItem?e.state.currItem.props.data.id:null}))},__itemContentRender:function(e){var t=e.data;switch(t.type){case 1:return i.createElement("span",null,i.createElement("i",{title:"这是操作按钮",className:"fa fa-hand-o-up",style:{margin:5,color:"#0B72A5"}}),i.createElement("i",{className:"fa "+t.icon,style:{marginRight:5}}),t.id+"、"+t.title);case 2:return i.createElement("span",null,i.createElement("i",{title:"这是静态常量",className:"fa fa-text-width",style:{margin:5,color:"#d9534f"}}),i.createElement("i",{className:"fa "+t.icon,style:{marginRight:5}}),t.id+"、"+t.title);case 3:return i.createElement("span",null,i.createElement("i",{title:"这是标签类别",className:"fa fa-tag",style:{margin:5}}),i.createElement("i",{className:"fa "+t.icon,style:{marginRight:5}}),t.id+"、"+t.title)}},render:function(){return i.createElement(s,a({},this.props,{where:{menuId:this.props.menuId},itemContentRender:this.__itemContentRender,rightRender:this.__rightRender,leftWidth:30}))}})},function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getInitialState:function(){return{userId:this.props.userId||Session.json().id,toolbarItems:this.props.userId?[]:[{icon:"fa-edit",text:"修改个人信息",onClick:this.__onEdit}],info:null,formItems:[{title:"头像",name:"avatarImg",type:"ImageUploader",action:"/klproject/uploadFiles"},{title:"用户名",name:"name",type:"Input",required:!0,error:"用户名必填项!"},{title:"密码",name:"pwd",type:"Input",attrs:{type:"password"},required:!0,error:"密码必填项!"},{title:"邮箱",name:"email",type:"Input",required:!0,error:"邮箱必填项!"},{title:"手机号",name:"phone",type:"Input",required:!0,error:"手机号必填项!"},{title:"地址",name:"address",type:"Input"},{title:"说明",name:"note",type:"Textarea"}],data:Store.post("/znadmin/model/select",{model:"zn_admin_role",where:{pid:0}})}},componentDidMount:function(){this.__loadUserInfo()},__doSuccess:function(){Popup.close("dialog"),Toast.success("修改成功"),Store.post("/znadmin/user/findUserById",{userId:this.state.userId}).exec().then(function(e){this.setState({info:e.result})}.bind(this))},__onEdit:function(e){Popup.dialog({title:"修改个人信息",hStyle:{backgroundColor:"#0B72A5"},width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/updateNode",exts:{model:"zn_admin_user",where:{id:this.state.info.id}},merge:"data",value:this.state.info,style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"修改",icon:"fa-edit",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.state.formItems})})},__loadUserInfo:function(){Store.post("/znadmin/user/findUserById",{userId:this.state.userId}).exec().then(function(e){this.setState({info:e.result})}.bind(this))},__onTreeMenuItemCheckboxChange:function(e){Store.post("/znadmin/user/updateUser",{data:{roleIds:e},userId:this.state.info.id}).exec().then(function(e){Toast.success("保存成功")})},__itemContentRender:function(e){var t="";return 1==e.data.type&&(t="fa-sitemap"),2==e.data.type&&(t="fa-graduation-cap"),a.createElement("span",null,a.createElement("i",{style:{margin:5},className:"fa "+t}),e.data.id+"、"+e.data.title)},render:function(){return this.state.info?a.createElement(UI.Page,{title:this.state.info.name,icon:"fa-newspaper-o",toolbarItems:this.state.toolbarItems},a.createElement("div",{className:"user-info"},a.createElement("div",{className:"info-form user-item"},a.createElement("img",{className:"avatar",src:Store.fixURL(this.state.info.avatarImg)||"./images/DefaultAvatar.png"}),a.createElement("div",{className:"details"},a.createElement("span",{className:"last-logintime"},"最近一次登录时间：",this.state.info.lastLoginTime||"还未登陆"),a.createElement("div",{className:"name"},this.state.info.name),a.createElement("div",null,a.createElement("i",{className:"fa fa-clock-o"}),"创建时间：",this.state.info.createTime),a.createElement("div",null,a.createElement("i",{className:"fa fa-envelope"}),"邮箱：",this.state.info.email),a.createElement("div",null,a.createElement("i",{className:"fa fa-phone"}),"手机号：",this.state.info.phone),a.createElement("div",null,this.state.info.note))),a.createElement("div",{className:"rt-panel c-default"},a.createElement("div",{className:"p-head"},"部门及角色"),a.createElement("div",{className:"p-body"},a.createElement(UI.TreeListView,{disabled:!0,cascade:!1,enableCheckbox:!0,onItemCheckboxChange:this.__onTreeMenuItemCheckboxChange,value:this.state.info.roleIds,itemContentRender:this.__itemContentRender,ref:"maintreemenu",activeAll:!0,data:this.state.data}))))):null}})},function(e,t,n){var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(6),s=n(21),o=n(29);e.exports=i.createClass({displayName:"exports",getDefaultProps:function(){return{model:"zn_admin_project",title:"项目管理",leftWidth:20,pid:0,fields:[{title:"模块名称",type:"Input",name:"title"},{title:"版本号",type:"Input",name:"version"},{title:"优先级",
type:"Select",name:"priority",data:[{text:"正常",value:1},{text:"紧急",value:2},{text:"非常紧急",value:3}]},{title:"开始时间",name:"beginTime",type:"Timer"},{title:"结束时间",name:"endTime",type:"Timer"},{title:"文件",name:"files",type:"FileUploader",action:"/znadmin/uploadFiles"},{title:"功能表述",type:"RichEditor",name:"description"},{title:"备注",type:"Textarea",name:"note"}]}},__rightRender:function(e){var t=e.state.currItem;return i.createElement(o,{data:t?t.props.data:null})},__itemContentRender:function(e){return i.createElement("div",{style:{display:"inline-flex",lineHeight:"25px"}},i.createElement("span",{className:"title"},e.data.title),i.createElement("span",{className:"version"},"(",e.data.version,")"))},render:function(){return i.createElement(s,a({itemContentRender:this.__itemContentRender},this.props,{rightRender:this.__rightRender}))}})},function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{data:null,model:"zn_admin_project_bug"}},componentWillReceiveProps:function(e){e.data!==this.props.data&&(this.state.data._data.where={projectId:e.data.id},this.state.data.exec())},getInitialState:function(){var e={};return this.props.data&&(e.projectId=this.props.data.id),{data:Store.post("/znadmin/model/paging",{model:this.props.model,where:e}),items:[{title:"操作",width:60,textAlign:"center"},{title:"问题",name:"title",width:220,filter:{type:"Input",opts:["like"]}},{title:"状态",name:"state",width:80,filter:{type:"Menu",data:[{text:"待处理",value:0},{text:"处理中...",value:2},{text:"已经解决",value:3},{text:"已经确认",value:3}],opts:["="]}},{title:"优先级",name:"priority",width:80,filter:{type:"Menu",data:[{text:"正常",value:1},{text:"紧急",value:2},{text:"非常紧急",value:3}],opts:["="]}},{title:"开始时间",name:"beginTime",width:140},{title:"结束时间",name:"endTime",width:140},{title:"完成时间",name:"finishTime",width:140},{title:"提交时间",name:"createTime",width:140},{title:"描述",name:"note"}],formItems:[{title:"问题",name:"title",type:"Textarea"},{title:"版本号",type:"Input",name:"version"},{title:"优先级",type:"Select",name:"priority",data:[{text:"正常",value:1},{text:"紧急",value:2},{text:"非常紧急",value:3}]},{title:"开始时间",name:"beginTime",type:"Timer"},{title:"结束时间",name:"endTime",type:"Timer"},{title:"附件",name:"files",type:"FileUploader",action:"/znadmin/uploadFiles"},{title:"问题描述",name:"description",type:"RichEditor"},{title:"解决方案",name:"solution",type:"RichEditor"}],toolbarItems:[{text:"添加",icon:"fa-plus"}]}},__onRowActions:function(e,t){var n=this.state.data,a=this;switch(e.props.icon){case"fa-remove":Alert.show({width:280,title:"提示",content:"确定删除该数据吗？",onConfirm:function(){Store.post("/znadmin/model/deleteNode",{model:a.props.model,id:t.id}).exec().then(function(e){Toast.success("删除成功！"),n.refresh()})}});break;case"fa-edit":this.__updateItem(t)}},__onView:function(){},__onTableColumnRender:function(e,t,n,i,s){var o=this;switch(t){case 0:return a.createElement(UI.ListView,{className:"rt-flex",data:[{text:"删除",icon:"fa-remove"},{text:"修改",icon:"fa-edit"}],itemRender:function(e,t){return a.createElement("i",{title:e.text,className:"fa "+e.icon,style:e.style})},onClick:function(e,t){return o.__onRowActions(t,n)}});case 1:return a.createElement("a",{style:{textDecoration:"underline"},onClick:function(){return o.__onView(n)}},s);case 2:switch(+s){case 0:return a.createElement("span",null,"等待处理");case 1:return a.createElement("span",{style:{color:"yellow"}},"处理中");case 2:return a.createElement("span",{style:{color:"red"}},"已经解决");case 3:return a.createElement("span",{style:{color:"red"}},"已经确认")}return null;case 3:switch(+s){case 1:return a.createElement("span",null,"正常");case 2:return a.createElement("span",{style:{color:"#F44336"}},"紧急");case 3:return a.createElement("span",{style:{color:"red"}},"非常紧急")}return null}},__updateItem:function(e){Popup.dialog({title:"修改",hStyle:{backgroundColor:"#0B72A5"},width:780,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/updateNode",exts:{model:this.props.model,where:{id:e.id}},merge:"data",value:Store.post("/znadmin/model/selectOne",{model:this.props.model,where:{id:e.id}}),style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"修改",icon:"fa-edit",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.state.formItems})})},__doSuccess:function(){Popup.close("dialog"),Toast.success("操作成功"),this.state.data.refresh()},__addItem:function(e){return this.props.data?void Popup.dialog({title:"添加",width:780,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/addNode",exts:{model:this.props.model},hiddens:{projectId:this.props.data.id},merge:"data",style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"添加",icon:"fa-plus",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.state.formItems})}):(Toast.warning("请先选择左边商品类型项"),!1)},__onToolbarClick:function(e){switch(e.icon){case"fa-plus":this.__addItem()}},render:function(){return a.createElement(UI.Page,{title:"问题列表",icon:"fa-list-ul",onToolbarClick:this.__onToolbarClick,toolbarItems:this.state.toolbarItems},a.createElement(UI.PagerView,{view:"Table",checkbox:0,enableFilter:!0,showHeader:!0,data:this.state.data,columnRender:this.__onTableColumnRender,onTableRowClick:this.__onTableRowClick,items:this.state.items}))}})},function(e,t,n){var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(6),s=n(21),o=n(31);e.exports=i.createClass({displayName:"exports",getDefaultProps:function(){return{model:"zn_admin_role",pid:0,title:"部门及角色管理",menuId:0,fields:[{title:"名称",type:"Input",name:"title"},{title:"类型",type:"Radio",name:"type",value:1,data:[{text:"分类",value:0},{text:"部门",value:1},{text:"角色",value:2}]},{title:"说明",type:"Textarea",name:"note"}]}},componentDidMount:function(){},__rightRender:function(e){return i.createElement(o,{roleId:e.state.currItem?e.state.currItem.props.data.id:null})},__itemContentRender:function(e){var t=e.data;switch(t.type){case 0:return i.createElement("span",null,t.id+"、"+t.title);case 1:return i.createElement("span",null,i.createElement("i",{title:"这是部门",className:"fa fa-sitemap",style:{margin:5,color:"#d9534f"}}),t.id+"、"+t.title);case 2:return i.createElement("span",null,i.createElement("i",{title:"这是角色",className:"fa fa-graduation-cap",style:{margin:5}}),t.id+"、"+t.title)}},render:function(){return i.createElement(s,a({},this.props,{rightRender:this.__rightRender,itemContentRender:this.__itemContentRender}))}})},function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{}},getInitialState:function(){return{data:Store.post("/znadmin/model/paging",{model:"zn_admin_user"})}},componentWillReceiveProps:function(e){e.roleId!=this.props.roleId&&(this.state.data._data.where={"0&<>":"locate(',"+e.roleId+",',roleIds)"},this.state.data.exec())},__onUserClick:function(e,t,n){e.stopPropagation(),Session.jump("/main/znadmin/UserInfo",{userId:t.id})},__itemRender:function(e,t){var n=this;return a.createElement("div",{className:"user-item"},a.createElement("img",{className:"avatar",src:Store.fixURL(e.avatarImg||"")}),a.createElement("div",{className:"details"},a.createElement("span",{className:"last-logintime"},e.lastLoginTime||"还未登陆"),a.createElement("div",{className:"name",onClick:function(a){return n.__onUserClick(a,e,t)}},e.name),a.createElement("div",null,a.createElement("i",{className:"fa fa-clock-o"}),"创建时间：",e.createTime),a.createElement("div",null,a.createElement("i",{className:"fa fa-envelope"}),"邮箱：",e.email),a.createElement("div",null,a.createElement("i",{className:"fa fa-phone"}),"手机号：",e.phone)))},render:function(){return a.createElement(UI.PagerView,{view:"ListView",className:"rt-list-view-border",textKey:"name",valueKey:"id",selectMode:"none",itemRender:this.__itemRender,data:this.state.data})}})},function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{model:"zn_admin_user"}},getInitialState:function(){return{data:Store.post("/znadmin/model/paging",{model:this.props.model}),items:[{title:"用户名",name:"name",width:80},{title:"邮箱",name:"email",width:200},{title:"手机号",name:"phone",width:120},{title:"地址",name:"address",width:200},{title:"说明",name:"note"}],formItems:[{title:"用户名",name:"name",type:"Input",required:!0,error:"用户名必填项!"},{title:"邮箱",name:"email",type:"Input"},{title:"手机号",name:"phone",type:"Input"},{title:"地址",name:"address",type:"Input"},{title:"说明",name:"note",type:"Textarea"}],toolbarItems:[{text:"添加",name:"add",icon:"fa-plus",style:{marginRight:5}},{text:"删除",name:"remove",status:"danger",icon:"fa-remove",style:{marginRight:5}}]}},__doSuccess:function(){Popup.close("dialog"),Toast.success("操作成功！"),this.state.data.refresh()},__addItem:function(){Popup.dialog({title:"新增用户",hStyle:{backgroundColor:"#0B72A5"},width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/addNode",merge:"data",exts:{model:this.props.model},style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"新增用户",icon:"fa-plus",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.state.formItems})})},__updateItem:function(e){Popup.dialog({title:"更新用户信息",hStyle:{backgroundColor:"#0B72A5"},width:480,content:a.createElement(UI.Form,{method:"POST",layout:"stacked",action:"/znadmin/model/updateNode",exts:{model:this.props.model,where:{id:e.id}},merge:"data",data:e,style:{margin:25},syncSubmit:!1,onSubmitSuccess:this.__doSuccess,btns:[{text:"更新",icon:"fa-edit",type:"submit",float:"right",style:{marginRight:0}},{text:"取消",type:"cancle",status:"danger",float:"right"}],items:this.state.formItems})})},__removeItems:function(){var e=this,t=this.refs.table.getValue();t&&t.length?Popup.confirm({content:"确认删除这"+t.length+"个用户吗？",onConfirm:function(){Store.post("/znadmin/model/deleteNodes",{model:this.props.model,ids:t}).exec().then(function(){Toast.success("删除成功"),e.state.data.refresh()},function(e){Toast.warning("删除失败: "+e.result)})}.bind(this)}):Toast.warning("请先选择要删除的用户")},__onToolbarClick:function(e){switch(e.name){case"add":this.__addItem();break;case"remove":this.__removeItems()}},__onEditItem:function(e,t){e.stopPropagation(),this.__updateItem(t)},__itemRender:function(e,t){var n=this;return a.createElement("div",{className:"user-item"},a.createElement("img",{className:"avatar",src:"./images/DefaultAvatar.png"}),a.createElement("div",{className:"details"},a.createElement("span",{className:"last-logintime"},e.lastLoginTime||"还未登陆"),a.createElement("div",{className:"name",onClick:function(a){return n.__onUserClick(a,e,t)}},e.name,a.createElement("i",{style:{margin:5,color:"#971818"},className:"fa fa-edit",onClick:function(t){return n.__onEditItem(t,e)}})),a.createElement("div",null,a.createElement("i",{className:"fa fa-clock-o"}),"创建时间：",e.createTime),a.createElement("div",null,a.createElement("i",{className:"fa fa-envelope"}),"邮箱：",e.email),a.createElement("div",null,a.createElement("i",{className:"fa fa-phone"}),"手机号：",e.phone)))},__onTableColumnRender:function(e,t,n,i,s){switch(t){case 1:return a.createElement("a",{href:"#/main/znadmin/UserInfo?userId="+n.id},s)}},render:function(){return a.createElement(UI.Page,{toolbarItems:this.state.toolbarItems,onToolbarClick:this.__onToolbarClick,title:"系统账户管理"},a.createElement(UI.PagerView,{ref:"table",view:"Table",enableFilter:!0,checkbox:50,showHeader:!0,columnRender:this.__onTableColumnRender,onTableRowClick:this.__onTableRowClick,data:this.state.data,items:this.state.items}))}})},function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getInitialState:function(){return{userId:this.props.userId,info:null,data:Store.post("/znadmin/model/select",{model:"zn_admin_role",where:{pid:0}})}},componentDidMount:function(){this.__loadUserInfo()},__loadUserInfo:function(){Store.post("/znadmin/user/findUserById",{userId:this.state.userId}).exec().then(function(e){this.setState({info:e.result})}.bind(this))},__onTreeMenuItemCheckboxChange:function(e){Store.post("/znadmin/user/updateUser",{data:{roleIds:e},userId:this.state.info.id}).exec().then(function(e){Popup.message({content:"保存成功!",type:"success"})})},__itemContentRender:function(e){var t="";return 1==e.data.type&&(t="fa-sitemap"),2==e.data.type&&(t="fa-graduation-cap"),a.createElement("span",null,a.createElement("i",{style:{margin:5},className:"fa "+t}),e.data.id+"、"+e.data.title)},render:function(){return this.state.info?a.createElement(UI.Page,{title:this.state.info.name,icon:"fa-newspaper-o",toolbarItems:this.state.toolbarItems},a.createElement("div",{className:"user-info"},a.createElement("div",{className:"info-form user-item"},a.createElement("img",{className:"avatar",src:"./images/DefaultAvatar.png"}),a.createElement("div",{className:"details"},a.createElement("span",{className:"last-logintime"},"最近一次登录时间：",this.state.info.lastLoginTime||"还未登陆"),a.createElement("div",{className:"name"},this.state.info.name),a.createElement("div",null,a.createElement("i",{className:"fa fa-clock-o"}),"创建时间：",this.state.info.createTime),a.createElement("div",null,a.createElement("i",{className:"fa fa-envelope"}),"邮箱：",this.state.info.email),a.createElement("div",null,a.createElement("i",{className:"fa fa-phone"}),"手机号：",this.state.info.phone),a.createElement("div",null,this.state.info.note))),a.createElement("div",{className:"rt-panel c-default"},a.createElement("div",{className:"p-head"},"部门及角色"),a.createElement("div",{className:"p-body"},a.createElement(UI.TreeListView,{cascade:!1,enableCheckbox:!0,onItemCheckboxChange:this.__onTreeMenuItemCheckboxChange,value:this.state.info.roleIds,itemContentRender:this.__itemContentRender,ref:"maintreemenu",activeAll:!0,data:this.state.data}))))):null}})},function(e,t){},,function(e,t,n){var a=n(6);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{model:"zn_admin_user_log"}},getInitialState:function(){return{data:Store.post("/znadmin/model/paging",{model:this.props.model}),items:[{title:"操作人",name:"userId_convert",width:100},{title:"操作时间",name:"createTime",width:180},{title:"类型",name:"actionType",width:80},{title:"说明",name:"note"}]}},__onToolbarClick:function(){},render:function(){return a.createElement(UI.Page,{toolbarItems:[{text:"导出"}],onToolbarClick:this.__onToolbarClick,title:"系统账户登录日志"},a.createElement(UI.PagerView,{view:"Table",enableFilter:!1,checkbox:0,showHeader:!0,data:this.state.data,items:this.state.items}))}})},function(e,t,n){e.exports=zn.arrayValueToObject(["Menu","MyInfo","Project","Role","User","UserInfo","UserLog","Var"],function(e,t){return n(38)("./"+e+".js")})},function(e,t,n){function a(e){return n(i(e))}function i(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./Menu.js":25,"./MyInfo.js":27,"./Project.js":28,"./ProjectBug.js":29,"./Role.js":30,"./User.js":32,"./UserInfo.js":33,"./UserLog.js":36,"./UsersForRoles.js":31,"./Var.js":26,"./index.js":37};a.keys=function(){return Object.keys(s)},a.resolve=i,e.exports=a,a.id=38}]);